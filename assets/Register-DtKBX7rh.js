import{f as j,e as N,b as o,y as m,j as e}from"./index-B1hlK_Kc.js";import{P as x,L as P}from"./ReactToastify-B_9WP6Fi.js";const E=()=>{const{register:h,user:t}=j(),u=N(),[a,d]=o.useState({name:"",email:"",password:"",confirmPassword:""}),[i,g]=o.useState("customer"),[f,l]=o.useState(!1);o.useEffect(()=>{const s=localStorage.getItem("register_name"),r=localStorage.getItem("register_email");(s||r)&&d(n=>({...n,name:s||"",email:r||""}))},[]),o.useEffect(()=>{if(t&&t.name){const s=t.venueManager?"/venue-manager":"/customer";u(s,{replace:!0}),m.success(`Welcome ${t.name}!`)}},[t,u]);const c=s=>{d(r=>({...r,[s.target.name]:s.target.value}))},b=async s=>{s.preventDefault(),l(!0);const{name:r,email:n,password:p,confirmPassword:y}=a;if(!n.endsWith("@stud.noroff.no")){m.error("Email must end with @stud.noroff.no"),l(!1);return}if(p!==y){m.error("Passwords do not match"),l(!1);return}try{await h({name:r,email:n,password:p,venueManager:i==="manager"}),localStorage.setItem("register_name",r),localStorage.setItem("register_email",n)}catch(v){m.error(v.message||"Registration failed")}finally{l(!1)}},w=a.name.trim()&&a.email.trim()&&a.password.length>=8&&a.confirmPassword.length>=8;return t&&t.name?e.jsx("div",{className:"text-center mt-10 font-[Poppins]",children:"Redirecting..."}):e.jsxs("div",{className:"max-w-md mx-auto p-8 mt-10 bg-white shadow-xl rounded-2xl font-[Poppins]",children:[e.jsx("h2",{className:"text-4xl font-semibold text-center mb-6",children:"Create account"}),e.jsxs("div",{className:"flex justify-center mb-6 bg-gray-100 p-1 rounded-xl",children:[e.jsx("button",{type:"button",className:`w-1/2 py-2 rounded-xl transition-all duration-200 cursor-pointer ${i==="customer"?"bg-green-200 font-semibold":"hover:bg-gray-200"}`,onClick:()=>g("customer"),children:"Customer"}),e.jsx("button",{type:"button",className:`w-1/2 py-2 rounded-xl transition-all duration-200 cursor-pointer ${i==="manager"?"bg-green-200 font-semibold":"hover:bg-gray-200"}`,onClick:()=>g("manager"),children:"Venue Manager"})]}),e.jsx("p",{className:"text-center text-sm text-gray-600 mb-4",children:i==="customer"?"A customer account is used for booking venues.":"A venue manager account is used to create and manage your venues."}),e.jsxs("form",{onSubmit:b,className:"space-y-5",children:[e.jsx("input",{name:"name",placeholder:"Full Name",value:a.name,onChange:c,required:!0,className:"w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{name:"email",type:"email",placeholder:"Your Noroff Email",value:a.email,onChange:c,required:!0,className:"w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(x,{id:"password",name:"password",value:a.password,onChange:c,placeholder:"Password"}),e.jsx(x,{id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:c,placeholder:"Confirm Password"}),e.jsxs("button",{type:"submit",disabled:!w||f,className:"w-full font-semibold flex justify-center items-center gap-2 text-white py-2 rounded-xl transition button-color disabled:opacity-60 cursor-pointer",children:[f&&e.jsx(P,{className:"w-4 h-4 animate-spin"})," Create Account"]})]})]})};export{E as default};
