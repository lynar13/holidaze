import{f as S,e as C,i as E,b as o,j as e,y as d}from"./index-zMy5iA0J.js";import{P as L,L as k}from"./ReactToastify-BaY15dhM.js";const P=()=>{var y;const{login:j,user:r}=S(),m=C(),i=E(),[a,f]=o.useState({email:"",password:""}),[g,p]=o.useState("customer"),[b,c]=o.useState(!1),[u,x]=o.useState(!1);o.useEffect(()=>{const t=localStorage.getItem("remember_email");t&&(f(s=>({...s,email:t})),x(!0))},[]),o.useEffect(()=>{var t,s;if(r&&typeof r.name=="string"){const n=((s=(t=i.state)==null?void 0:t.from)==null?void 0:s.pathname)||((r==null?void 0:r.venueManager)===!0?"/venue-manager":"/customer");m(n,{replace:!0})}},[r,(y=i.state)==null?void 0:y.from,m]);const h=t=>{f({...a,[t.target.name]:t.target.value})},w=async t=>{var s,n;if(t.preventDefault(),c(!0),!a.email.endsWith("@stud.noroff.no")){d.error("Email must end with @stud.noroff.no"),c(!1);return}try{const l=await j(a);u?localStorage.setItem("remember_email",a.email):localStorage.removeItem("remember_email");const N=((n=(s=i.state)==null?void 0:s.from)==null?void 0:n.pathname)||(l.venueManager?"/venue-manager":"/customer");m(N,{replace:!0}),d.success(`Welcome back, ${l.name}!`)}catch(l){d.error(l.message)}finally{c(!1)}},v=a.email.trim()!==""&&a.password.trim()!=="";return e.jsxs("div",{className:"max-w-md mx-auto p-8 mt-10 bg-white shadow-xl rounded-2xl font-[Poppins]",children:[e.jsx("h2",{className:"text-4xl font-semibold text-center mb-6",children:"Log in to your account"}),e.jsxs("div",{className:"flex justify-center mb-6 bg-gray-100 p-1 rounded-xl",children:[e.jsx("button",{type:"button",className:`w-1/2 py-2 rounded-xl transition-all duration-200 cursor-pointer ${g==="customer"?"bg-green-200 font-semibold":"hover:bg-gray-200"}`,onClick:()=>p("customer"),children:"Customer"}),e.jsx("button",{type:"button",className:`w-1/2 py-2 rounded-xl transition-all duration-200 cursor-pointer ${g==="manager"?"bg-green-200 font-semibold":"hover:bg-gray-200"}`,onClick:()=>p("manager"),children:"Venue Manager"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-5",children:[e.jsx("input",{name:"email",type:"email",placeholder:"Your Noroff Email",value:a.email,onChange:h,required:!0,className:"w-full px-4 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(L,{name:"password",value:a.password,onChange:h,placeholder:"Password"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"remember",type:"checkbox",checked:u,onChange:()=>x(!u)}),e.jsx("label",{htmlFor:"remember",className:"text-sm",children:"Remember me"})]}),e.jsxs("button",{type:"submit",disabled:b||!v,className:"w-full font-semibold flex justify-center items-center gap-2 text-white py-2 rounded-xl transition button-color disabled:opacity-70 cursor-pointer",children:[b&&e.jsx(k,{className:"w-4 h-4 animate-spin"})," Login"]})]})]})};export{P as default};
